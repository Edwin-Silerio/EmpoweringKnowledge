{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import*as d3 from\"d3\";var PieChart=/*#__PURE__*/function(_Component){_inherits(PieChart,_Component);function PieChart(props){var _this;_classCallCheck(this,PieChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(PieChart).call(this,props));_this.state={democrat:0,republican:0,other:0};return _this;}_createClass(PieChart,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var value=window.location.href.split(\"/\");var path=value[4];var page=1;for(var i=1;i<173;i++){fetch('https://api.empoweringknowledge.me/api/congressmembers?page='+page).then(function(res){return res.json();}).then(function(data){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=data.objects[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var d=_step.value;if(d.party==\"D\"){_this2.setState({democrat:_this2.state.democrat+=Object.keys(d.bills_sponsored).length});}else if(d.party==\"R\"){_this2.setState({republican:_this2.state.republican+=Object.keys(d.bills_sponsored).length});}else{_this2.setState({other:_this2.state.other+=Object.keys(d.bills_sponsored).length});}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}},this.finish());}}},{key:\"finish\",value:function finish(){console.log(\"done\");return;}},{key:\"render\",value:function render(){// Create dummy data\nvar data={Republican:this.state.republican,Democrat:this.state.democrat,Other:this.state.other};console.log(data);// set the dimensions and margins of the graph\nvar width=450;var height=450;var margin=40;// The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\nvar radius=Math.min(width,height)/2-margin;// append the svg object to the div called 'my_dataviz'\nvar svg=d3.select(\"#my_dataviz\").append(\"svg\").attr(\"width\",width).attr(\"height\",height).append(\"g\").attr(\"transform\",\"translate(\"+width/2+\",\"+height/2+\")\");// set the color scale\nvar color=d3.scaleOrdinal().domain(data).range([\"#ff0000\",\"#0000ff\",\"#808080\"]);// shape helper to build arcs:\nvar arcGenerator=d3.arc().innerRadius(0).outerRadius(radius);// Compute the position of each group on the pie:\nvar pie=d3.pie().value(function(d){return d.value;});var data_ready=pie(d3.entries(data));// Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\nsvg.selectAll('whatever').data(data_ready).enter().append('path').attr('d',d3.arc().innerRadius(0).outerRadius(radius)).attr('fill',function(d){return color(d.data.key);}).attr(\"stroke\",\"black\").style(\"stroke-width\",\"2px\").style(\"opacity\",0.7);svg.selectAll('whatever').data(data_ready).enter().append('text').text(function(d){return d.data.key;}).attr(\"transform\",function(d){return\"translate(\"+arcGenerator.centroid(d)+\")\";}).style(\"text-anchor\",\"middle\").style(\"font-size\",17);return React.createElement(\"div\",null,React.createElement(\"h2\",{style:{paddingTop:\"2%\"}},\"Total Number of Energy Bills by Party\"),React.createElement(\"div\",{style:{paddingLeft:\"35%\",justifyContent:\"center\"}},React.createElement(\"svg\",{id:\"my_dataviz\",width:\"100%\",height:650})));}}]);return PieChart;}(Component);export default PieChart;","map":{"version":3,"sources":["C:\\Users\\Edwin\\Documents\\College\\CS_373\\cs373-web\\frontend\\empoweringknowledge\\src\\PieChart.js"],"names":["React","Component","d3","PieChart","props","state","democrat","republican","other","value","window","location","href","split","path","page","i","fetch","then","res","json","data","objects","d","party","setState","Object","keys","bills_sponsored","length","finish","console","log","Republican","Democrat","Other","width","height","margin","radius","Math","min","svg","select","append","attr","color","scaleOrdinal","domain","range","arcGenerator","arc","innerRadius","outerRadius","pie","data_ready","entries","selectAll","enter","key","style","text","centroid","paddingTop","paddingLeft","justifyContent"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport * as d3 from \"d3\";\r\n\r\nclass PieChart extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        democrat: 0,\r\n        republican: 0,\r\n        other: 0\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        var value = window.location.href.split(\"/\")\r\n        var path = (value[4])\r\n        var page = 1;\r\n        for(var i = 1; i < 173; i++){\r\n            fetch('https://api.empoweringknowledge.me/api/congressmembers?page=' + page)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                for(var d of data.objects){\r\n                    if(d.party == \"D\"){\r\n                        this.setState({ democrat: this.state.democrat += Object.keys(d.bills_sponsored).length}); \r\n                       \r\n                    }\r\n                    else if(d.party == \"R\"){\r\n                        this.setState({ republican: this.state.republican += Object.keys(d.bills_sponsored).length}); \r\n                    }\r\n                    else {\r\n                        this.setState({ other: this.state.other += Object.keys(d.bills_sponsored).length}); \r\n                    }\r\n                   \r\n                }\r\n            }, this.finish())\r\n            \r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    finish(){    \r\n        console.log(\"done\")\r\n        return\r\n    }\r\n\r\n  \r\n\r\n    render() {\r\n        \r\n        // Create dummy data\r\n        var data = {Republican: this.state.republican, Democrat: this.state.democrat, Other: this.state.other}\r\n\r\n        console.log(data)\r\n        // set the dimensions and margins of the graph\r\n        var width = 450\r\n        var height = 450\r\n        var margin = 40\r\n\r\n        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\r\n        var radius = Math.min(width, height) / 2 - margin\r\n\r\n        // append the svg object to the div called 'my_dataviz'\r\n        var svg = d3.select(\"#my_dataviz\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\r\n\r\n\r\n        // set the color scale\r\n        var color = d3.scaleOrdinal()\r\n        .domain(data)\r\n        .range([\"#ff0000\", \"#0000ff\", \"#808080\"])\r\n\r\n         // shape helper to build arcs:\r\n        var arcGenerator = d3.arc()\r\n        .innerRadius(0)\r\n        .outerRadius(radius)\r\n\r\n\r\n\r\n        // Compute the position of each group on the pie:\r\n        var pie = d3.pie()\r\n        .value(function(d) {return d.value; })\r\n        var data_ready = pie(d3.entries(data))\r\n\r\n        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\r\n        svg\r\n        .selectAll('whatever')\r\n        .data(data_ready)\r\n        .enter()\r\n        .append('path')\r\n        .attr('d', d3.arc()\r\n        .innerRadius(0)\r\n        .outerRadius(radius)\r\n        )\r\n        .attr('fill', function(d){ return(color(d.data.key)) })\r\n        .attr(\"stroke\", \"black\")\r\n        .style(\"stroke-width\", \"2px\")\r\n        .style(\"opacity\", 0.7)\r\n\r\n            svg\r\n        .selectAll('whatever')\r\n        .data(data_ready)\r\n        .enter()\r\n        .append('text')\r\n        .text(function (d) { return d.data.key })\r\n        .attr(\"transform\", function (d) { return \"translate(\" + arcGenerator.centroid(d) + \")\"; })\r\n        .style(\"text-anchor\", \"middle\")\r\n        .style(\"font-size\", 17)\r\n    \r\n\r\n\r\n\r\n        return (\r\n            <div>\r\n                <h2 style={{paddingTop: \"2%\"}}>Total Number of Energy Bills by Party</h2>\r\n                <div style={{ paddingLeft: \"35%\", justifyContent: \"center\" }}>\r\n                    <svg id='my_dataviz' width=\"100%\" height={650}></svg>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default PieChart;\r\n"]},"metadata":{},"sourceType":"module"}