{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Button,ButtonGroup,Col,Card,CardBody,CardTitle,CardSubtitle,CardDeck,Dropdown,DropdownToggle,DropdownMenu,DropdownItem,Form,Input,FormGroup,Row}from'reactstrap';import{BrowserRouter}from'react-router-dom';import Highlighter from\"react-highlight-words\";import'./Navbar.css';import'bootstrap/dist/css/bootstrap.min.css';import MyPagination from\"./Pagination.js\";var STATESURL='https://api.empoweringknowledge.me/api/states';var ORDER='\"order_by\":[{\"field\":\"name\",\"direction\":\"';export var States=/*#__PURE__*/function(_Component){_inherits(States,_Component);function States(props){var _this;_classCallCheck(this,States);_this=_possibleConstructorReturn(this,_getPrototypeOf(States).call(this,props));_this.state={page:1,pages:0,nextpage:2,lastpage:1,items:[],input:\"\",isLoading:false,sortBy:\"asc\",attributes:{name:\"\",dominant_party:\"\",population:{\"lower\":\"\",\"upper\":\"\"},median_hh_income:{\"lower\":\"\",\"upper\":\"\"},primary_energy_source_1:\"\"},dropdownOpen:{party:false,population:false,median:false,resource:false},dropDownSelections:{party:\"None\",population:\"None\",median:\"None\",resource:\"None\"}};_this.handleTermChange=_this.handleTermChange.bind(_assertThisInitialized(_this));_this.handleSearch=_this.handleSearch.bind(_assertThisInitialized(_this));_this.handleEnter=_this.handleEnter.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handlePageClick=_this.handlePageClick.bind(_assertThisInitialized(_this));return _this;}_createClass(States,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({isLoading:true});var url=this.buildUrl();fetch(url).then(function(res){return res.json();}).then(function(data){var _this2$setState;_this2.setState((_this2$setState={items:data.objects},_defineProperty(_this2$setState,\"items\",data.objects),_defineProperty(_this2$setState,\"pages\",data.total_pages),_defineProperty(_this2$setState,\"isLoading\",false),_this2$setState),function(){if(_this2.state.pages<=1)_this2.setState({nextpage:1});});}).catch(console.log);}/*\r\n * Builds the url that will be used to fetch the data.\r\n */},{key:\"buildUrl\",value:function buildUrl(){var filter=\"\";var url=\"\";filter=this.buildFilter();filter=this.buildSearch(filter);// If there aren't any filters or terms for searching, use default url\n// that displays data in ascending order\nif(filter===\"\"){url=STATESURL+'?q={'+ORDER+this.state.sortBy+'\"}]}&page='+this.state.page;}else{// Else, add the filters and search query\nurl=STATESURL+'?q={\"filters\":['+filter+'],'+ORDER+this.state.sortBy+'\"}]}&page='+this.state.page;}return url;}/*\r\n * Loops through all of the of the model's filterable attributes and checks if \r\n * there is a filter being applied. If there is, it adds that filter query to \r\n * the filter string. \r\n */},{key:\"buildFilter\",value:function buildFilter(){var filter=\"\";var keys=Object.keys(this.state.attributes);// Grabs list of attributes\nvar currAttribute=\"\";var currAttributeVal=\"\";for(var i=1;i<keys.length;i++){currAttribute=keys[i];currAttributeVal=this.state.attributes[currAttribute];// Special cases, checks if the attribute we're looking at is population \n// or median\nif(currAttribute===\"population\"||currAttribute===\"median_hh_income\"){if(currAttributeVal[\"lower\"]!==\"\"){// If filter is empty, no comma is needed at the beginning\nif(filter===\"\"){filter+='{\"name\":\"'+currAttribute+'\",\"op\":\"gt\",\"val\":\"'+currAttributeVal[\"lower\"]+'\"}';}else{filter+=',{\"name\":\"'+currAttribute+'\",\"op\":\"ge\",\"val\":\"'+currAttributeVal[\"lower\"]+'\"}';}// Adds the second value to the filter query\nif(currAttributeVal[\"upper\"]!==\"\")filter+=',{\"name\":\"'+currAttribute+'\",\"op\":\"le\",\"val\":\"'+currAttributeVal[\"upper\"]+'\"}';}}// Checks the rest of the attributes\nelse if(currAttributeVal!==\"\"){if(filter===\"\"){filter+='{\"name\":\"'+currAttribute+'\",\"op\":\"eq\",\"val\":\"'+currAttributeVal+'\"}';}else{filter+=',{\"name\":\"'+currAttribute+'\",\"op\":\"eq\",\"val\":\"'+currAttributeVal+'\"}';}}}return filter;}/*\r\n * Loops through all of the model's attributes and adds a search query for each\r\n * term the user inputs. \r\n */},{key:\"buildSearch\",value:function buildSearch(filter){var search=\"\";var input=[];var keys=Object.keys(this.state.attributes);var currAttribute=\"\";input=this.state.input.split(\" \");// List of terms the user inputs\n// Checks if there's atleast one search term\nif(input[0]!=\"\"){// Checks if anything precedes this query\n// If something does, add a comma\nif(filter===\"\"){search='{\"or\":[';}else{search=',{\"or\":[';}// Loops through each of the attributes\nfor(var j=0;j<keys.length;j++){// Loops through each term the user inputs\nfor(var i=0;i<input.length;i++){currAttribute=keys[j];// Special case, adds comma if this is the first entry in the \n// search query \nif(currAttribute===\"name\"&&i==0)search+='{\"name\":\"'+currAttribute+'\",\"op\":\"like\",\"val\":\"\\%'+input[i]+'\\%\"}';else search+=',{\"name\":\"'+currAttribute+'\",\"op\":\"like\",\"val\":\"\\%'+input[i]+'\\%\"}';}}search+=\"]}\";filter+=search;}return filter;}/*\r\n * Sets the state input variable to what the user types.\r\n */},{key:\"handleTermChange\",value:function handleTermChange(e){this.setState({input:e.target.value});}/*\r\n * Calls componentDidMount so the data that is displayed is updated.\r\n */},{key:\"handleSearch\",value:function handleSearch(){this.componentDidMount();}/*\r\n * If the user presses 'Enter', calls the handleSearch() method so that the \r\n * search is made.\r\n */},{key:\"handleEnter\",value:function handleEnter(e){if(e.key===13){this.handleSearch();}}/*\r\n * If the user clicks on the 'Submit' buttion, calls the handleSearch() \r\n * method so that the search is made.\r\n */},{key:\"handleSubmit\",value:function handleSubmit(e){e.preventDefault();this.handleSearch();}/*\r\n * Sets the state sort variable to what the user chooses. Either 'asc' \r\n * or 'desc.' Then calls componentDidMount() so that the new data is loaded. \r\n */},{key:\"handleSorting\",value:function handleSorting(sort){var _this3=this;this.setState({sortBy:sort},function(){_this3.componentDidMount();});}/*\r\n * Updates the state attributes variable to what the user chooses for the \r\n * specified filter. Then calls componentDidMount() so that the new data \r\n * is loaded. \r\n */},{key:\"handleFilter\",value:function handleFilter(attribute,filter){var _this4=this;var newAttributes=this.state.attributes;newAttributes[attribute]=filter;this.setState({attributes:newAttributes,page:1,nextpage:2,lastpage:1},function(){_this4.componentDidMount();});}/*\r\n* Updates page variables that are used in pagination when the user clicks \r\n* on a new page number to go to. Then calls componentDidMount() so that the \r\n* new data is loaded. \r\n*/},{key:\"handlePageClick\",value:function handlePageClick(newPage){var _this5=this;if(newPage===1){this.setState({lastpage:newPage,page:newPage,nextpage:2},function(){_this5.componentDidMount();});}else if(newPage===this.state.pages){this.setState({lastpage:newPage-1,page:newPage,nextpage:newPage},function(){_this5.componentDidMount();});}else{this.setState({lastpage:newPage-1,page:newPage,nextpage:newPage+1},function(){_this5.componentDidMount();});}}/*\r\n * Resets all the attributes and variables that are used for filtering, \r\n * searching, and pagination to their default. Then calls componentDidMount() \r\n * so that the new data is loaded. \r\n */},{key:\"handleReset\",value:function handleReset(){var _this6=this;this.setState({dropDownSelections:{\"party\":\"None\",\"population\":\"None\",\"median\":\"None\",\"resource\":\"None\"},input:\"\",attributes:{name:\"\",dominant_party:\"\",population:{\"lower\":\"\",\"upper\":\"\"},median_hh_income:{\"lower\":\"\",\"upper\":\"\"},primary_energy_source_1:\"\"},page:1,nextpage:2,lastpage:1},function(){_this6.componentDidMount();});}/*\r\n * Toggles the dropdown option for the specified filterable attribute.\r\n */},{key:\"setDropdownOpen\",value:function setDropdownOpen(attribute){var newdropdownOpen=this.state.dropdownOpen;newdropdownOpen[attribute]=!newdropdownOpen[attribute];this.setState({dropdownOpen:newdropdownOpen});}/*\r\n * Sets the title variable for the dropdown menu of the correct filter. Then\r\n * checks the attribute that was passed in. Updates variables where needed and \r\n * calls handleFilter() with the attribute name and value.\r\n */},{key:\"setDropDownTitle\",value:function setDropDownTitle(attribute,selection){var newDropDownSelections=this.state.dropDownSelections;newDropDownSelections[attribute]=selection;this.setState({dropDownSelections:newDropDownSelections});if(selection===\"None\"){selection=\"\";}if(attribute===\"party\")this.handleFilter(\"dominant_party\",selection);else if(attribute===\"population\"){var lowerPop=\"\";var upperPop=\"\";switch(selection){case\"1 - 999,999\":selection={\"lower\":\"1\",\"upper\":\"999999\"};break;case\"1,000,000 - 9,999,999\":selection={\"lower\":\"1000000\",\"upper\":\"9999999\"};break;case\"10,000,000 - 19,999,999\":selection={\"lower\":\"10000000\",\"upper\":\"19999999\"};break;case\"> 20,000,000\":selection={\"lower\":\"20000000\",\"upper\":\"\"};break;default:selection={\"lower\":\"\",\"upper\":\"\"};}this.handleFilter(\"population\",selection);}else if(attribute===\"median\"){switch(selection){case\"1 - 49,999\":selection={\"lower\":\"1\",\"upper\":\"49999\"};break;case\"50,000 - 59,999\":selection={\"lower\":\"50000\",\"upper\":\"59999\"};break;case\"60,000 - 69,999\":selection={\"lower\":\"60000\",\"upper\":\"69999\"};break;case\"> 70,000\":selection={\"lower\":\"70000\",\"upper\":\"\"};break;default:selection={\"lower\":\"\",\"upper\":\"\"};}this.handleFilter(\"median_hh_income\",selection);}else if(attribute===\"resource\")this.handleFilter(\"primary_energy_source_1\",selection);}/* \r\n * Renders the button group for filters.\r\n */},{key:\"renderFilterButtonGroup\",value:function renderFilterButtonGroup(attribute,filterOptions,filterTitles){var _this7=this;return React.createElement(Dropdown,{isOpen:this.state.dropdownOpen[attribute],toggle:function toggle(){return _this7.setDropdownOpen(attribute);}},React.createElement(DropdownToggle,{caret:true},\"Filter by \",filterTitles[attribute],\": \",this.state.dropDownSelections[attribute]),React.createElement(DropdownMenu,null,filterOptions[attribute].map(function(selection){return React.createElement(DropdownItem,{onClick:function onClick(){return _this7.setDropDownTitle(attribute,selection);}},selection);})),' ');}/*\r\n * Renders the buttons for filters and sorting.\r\n */},{key:\"renderTop\",value:function renderTop(){var _this8=this;// Lists of all of the options for filtering for each attribute\nvar filterOptions={party:[\"None\",\"Democratic\",\"Republican\"],population:[\"None\",\"1 - 999,999\",\"1,000,000 - 9,999,999\",\"10,000,000 - 19,999,999\",\"> 20,000,000\"],median:[\"None\",\"1 - 49,999\",\"50,000 - 59,999\",\"60,000 - 69,999\",\"> 70,000\"],resource:[\"None\",\"Nuclear Power\",\"Natural Gas\",\"Coal\",\"Petroleum\",\"Hydroelectricity\"]};// Titles for the filter buttons, \"Filter by: _____\"\nvar filterTitles={party:\"Party\",population:\"Population\",median:\"Income\",resource:\"Energy\"};// Grabs list of filterable attributes\nvar attributesList=Object.keys(filterOptions);return React.createElement(\"container\",null,React.createElement(Row,null,React.createElement(Col,{className:\"text-left\"},React.createElement(ButtonGroup,null,// Renders all the filter buttons\nattributesList.map(function(attribute){return _this8.renderFilterButtonGroup(attribute,filterOptions,filterTitles);}),React.createElement(Button,{onClick:function onClick(){return _this8.handleReset();}},\"Reset\"),' ')),React.createElement(Col,{className:\"text-right\"},React.createElement(Button,{color:\"primary\",onClick:function onClick(){return _this8.handleSorting(\"asc\");}},\"Ascending\"),' ',React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return _this8.handleSorting(\"desc\");}},\"Descending\"),' ')),React.createElement(Form,{className:\"searchbox\",onSubmit:this.handleSubmit},React.createElement(FormGroup,{row:true,style:{paddingTop:\"25px\"}},React.createElement(Col,{sm:{size:'auto',offset:5}},React.createElement(Input,{type:\"text\",placeholder:\"Search\",onChange:this.handleTermChange,onKeyDown:this.handleEnter})))));}/*\r\n * Renders the body of a card item.\r\n */},{key:\"renderAttribute\",value:function renderAttribute(item,attribute){// Titles for the attributes in the card body\nvar attributeTitles={name:\"\",dominant_party:\"Dominate Party: \",population:\"Population: \",median_hh_income:\"Median Income: \",primary_energy_source_1:\"Primary Energy Source: \"};// Special case, if the attribute is the name, renders the attribute with\n// a CardTitle\nif(attribute===\"name\"){return React.createElement(CardTitle,null,attributeTitles[attribute],React.createElement(Highlighter,{highlightClassName:\"HighlightClass\",searchWords:this.state.input.split(\" \"),autoEscape:true,textToHighlight:\"\"+item[attribute]}));}return React.createElement(CardSubtitle,null,attributeTitles[attribute],React.createElement(Highlighter,{highlightClassName:\"HighlightClass\",searchWords:this.state.input.split(\" \"),autoEscape:true,textToHighlight:\"\"+item[attribute]}));}/*\r\n * Renders a card item.\r\n */},{key:\"renderCard\",value:function renderCard(item){var _this9=this;var attributeList=Object.keys(this.state.attributes);// Makes list of attributes\nreturn React.createElement(Card,null,React.createElement(\"img\",{top:true,width:\"80%\",style:{width:'300px',height:'375px'},src:\"https://www.state-maps.org/\"+item.congress_members[0][\"state_abr\"].toLowerCase()+\".gif\",alt:\"No image\"}),React.createElement(CardBody,null,attributeList.map(function(attribute){return _this9.renderAttribute(item,attribute);}),React.createElement(Button,{href:\"/state/\"+item.name,class:\"nav-link\",to:\"/state/\"+item.name},\" See More\")));}/*\r\n * Creates the cards for the states. Loops 3 times to create 3 card decks itmems\r\n * with 3 card items. Returns all 3 card deck items at the end. \r\n */},{key:\"renderCards\",value:function renderCards(){var _this10=this;var items=this.state.items;var cardDecks=[];// Will hold the card deck items\nvar cards=[];// Will hold the card \n// Need 3 card deck items so loop 3 times\nfor(var i=0;i<3;i++){cards=[];// Clears out the old card items to make a new one\n// Grabs 3 pieces of data at a time, creates card items for each of them\n// and adds each one to the cards list\nitems.slice(i*3,(i+1)*3).map(function(item){return cards.push(_this10.renderCard(item));});// Adds the 3 newly created cards to the cardDecks list\ncardDecks.push(React.createElement(CardDeck,null,cards));}return cardDecks;}/*\r\n * Renders the entire page.\r\n */},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",null,this.renderTop()),React.createElement(\"div\",{className:\"States\",style:{paddingTop:\"100px\",width:\"100%\",height:\"60%\"}},React.createElement(\"div\",null,React.createElement(Col,{sm:{size:'auto'}},this.renderCards())),React.createElement(\"div\",null,React.createElement(MyPagination,{pages:this.state.pages,handlePageClick:this.handlePageClick,nextpage:this.state.nextpage,lastpage:this.state.lastpage,page:this.state.page}))));}}]);return States;}(Component);export default States;","map":{"version":3,"sources":["C:\\Users\\Edwin\\Documents\\College\\CS_373\\cs373-web\\frontend\\empoweringknowledge\\src\\States.js"],"names":["React","Component","Button","ButtonGroup","Col","Card","CardBody","CardTitle","CardSubtitle","CardDeck","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","Form","Input","FormGroup","Row","BrowserRouter","Highlighter","MyPagination","STATESURL","ORDER","States","props","state","page","pages","nextpage","lastpage","items","input","isLoading","sortBy","attributes","name","dominant_party","population","median_hh_income","primary_energy_source_1","dropdownOpen","party","median","resource","dropDownSelections","handleTermChange","bind","handleSearch","handleEnter","handleSubmit","handlePageClick","setState","url","buildUrl","fetch","then","res","json","data","objects","total_pages","catch","console","log","filter","buildFilter","buildSearch","keys","Object","currAttribute","currAttributeVal","i","length","search","split","j","e","target","value","componentDidMount","key","preventDefault","sort","attribute","newAttributes","newPage","newdropdownOpen","selection","newDropDownSelections","handleFilter","lowerPop","upperPop","filterOptions","filterTitles","setDropdownOpen","map","setDropDownTitle","attributesList","renderFilterButtonGroup","handleReset","handleSorting","paddingTop","size","offset","item","attributeTitles","attributeList","width","height","congress_members","toLowerCase","renderAttribute","cardDecks","cards","slice","push","renderCard","renderTop","renderCards"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {\r\n    Button, ButtonGroup, Col, Card, CardBody, CardTitle, CardSubtitle, \r\n    CardDeck, Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Form, Input, \r\n    FormGroup, Row\r\n    } from 'reactstrap';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport Highlighter from \"react-highlight-words\";\r\nimport './Navbar.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport MyPagination from \"./Pagination.js\";\r\n\r\nconst STATESURL = 'https://api.empoweringknowledge.me/api/states';\r\nconst ORDER = '\"order_by\":[{\"field\":\"name\",\"direction\":\"';\r\n\r\nexport class States extends Component {\r\n\r\nconstructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        page: 1,\r\n        pages: 0,\r\n        nextpage: 2,\r\n        lastpage: 1,\r\n        items: [],\r\n        input: \"\",\r\n        isLoading: false,\r\n        sortBy: \"asc\",\r\n        attributes: {\r\n            name: \"\", \r\n            dominant_party: \"\", \r\n            population: {\"lower\": \"\", \"upper\": \"\"}, \r\n            median_hh_income: {\"lower\": \"\", \"upper\": \"\"}, \r\n            primary_energy_source_1: \"\"},\r\n        dropdownOpen: {\r\n            party: false, \r\n            population: false, \r\n            median: false, \r\n            resource: false},\r\n        dropDownSelections: {\r\n            party: \"None\", \r\n            population: \"None\", \r\n            median: \"None\", \r\n            resource: \"None\"},\r\n    };\r\n    this.handleTermChange = this.handleTermChange.bind(this);\r\n    this.handleSearch = this.handleSearch.bind(this);\r\n    this.handleEnter = this.handleEnter.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this); \r\n    this.handlePageClick = this.handlePageClick.bind(this); \r\n}\r\n\r\ncomponentDidMount() {\r\n    this.setState({isLoading: true});\r\n\r\n    var url = this.buildUrl();\r\n\r\n    fetch(url)\r\n        .then(res => res.json())\r\n        .then((data) => {\r\n            this.setState({ items: data.objects, items: data.objects, \r\n                pages:data.total_pages,isLoading: false}, () => {\r\n                if(this.state.pages <= 1)\r\n                    this.setState({nextpage: 1})    \r\n            });      \r\n        })\r\n        .catch(console.log);\r\n}\r\n\r\n/*\r\n * Builds the url that will be used to fetch the data.\r\n */\r\nbuildUrl(){\r\n    var filter = \"\";\r\n    var url = \"\";\r\n    \r\n    filter = this.buildFilter();\r\n    filter = this.buildSearch(filter);\r\n    \r\n    // If there aren't any filters or terms for searching, use default url\r\n    // that displays data in ascending order\r\n    if(filter === \"\"){\r\n        url = STATESURL + '?q={'\r\n        + ORDER \r\n        + this.state.sortBy \r\n        + '\"}]}&page='\r\n        + this.state.page;\r\n    } else{ // Else, add the filters and search query\r\n        url = STATESURL + '?q={\"filters\":['\r\n        + filter\r\n        + '],'\r\n        + ORDER\r\n        + this.state.sortBy \r\n        + '\"}]}&page='\r\n        + this.state.page;\r\n    }\r\n\r\n    return url;\r\n}\r\n\r\n/*\r\n * Loops through all of the of the model's filterable attributes and checks if \r\n * there is a filter being applied. If there is, it adds that filter query to \r\n * the filter string. \r\n */\r\nbuildFilter(){\r\n    var filter = \"\";\r\n    var keys = Object.keys(this.state.attributes); // Grabs list of attributes\r\n    var currAttribute = \"\";\r\n    var currAttributeVal = \"\";\r\n\r\n    for(var i = 1; i < keys.length; i++){\r\n        currAttribute = keys[i];\r\n        currAttributeVal = this.state.attributes[currAttribute];\r\n\r\n        // Special cases, checks if the attribute we're looking at is population \r\n        // or median\r\n        if(currAttribute === \"population\" || \r\n            currAttribute === \"median_hh_income\"){\r\n            if(currAttributeVal[\"lower\"] !== \"\"){\r\n                // If filter is empty, no comma is needed at the beginning\r\n                if(filter === \"\"){ \r\n                    filter += '{\"name\":\"' + currAttribute   \r\n                        + '\",\"op\":\"gt\",\"val\":\"'+ currAttributeVal[\"lower\"] +'\"}'\r\n                } else{\r\n                    filter += ',{\"name\":\"' + currAttribute \r\n                        + '\",\"op\":\"ge\",\"val\":\"'+ currAttributeVal[\"lower\"] +'\"}'\r\n                }\r\n\r\n                // Adds the second value to the filter query\r\n                if(currAttributeVal[\"upper\"] !== \"\")\r\n                    filter += ',{\"name\":\"' + currAttribute \r\n                        + '\",\"op\":\"le\",\"val\":\"'+ currAttributeVal[\"upper\"] +'\"}'\r\n            }\r\n        }\r\n\r\n        // Checks the rest of the attributes\r\n        else if( currAttributeVal !== \"\"){\r\n            if(filter === \"\"){\r\n                filter += '{\"name\":\"' + currAttribute \r\n                    + '\",\"op\":\"eq\",\"val\":\"'+ currAttributeVal +'\"}'\r\n            }else{\r\n                filter += ',{\"name\":\"' + currAttribute \r\n                    + '\",\"op\":\"eq\",\"val\":\"'+ currAttributeVal +'\"}'\r\n            }\r\n        }\r\n    }\r\n\r\n    return filter;\r\n}\r\n\r\n/*\r\n * Loops through all of the model's attributes and adds a search query for each\r\n * term the user inputs. \r\n */\r\nbuildSearch(filter){\r\n    var search = \"\";\r\n    var input = [];\r\n    var keys = Object.keys(this.state.attributes);\r\n    var currAttribute = \"\";\r\n\r\n    input = this.state.input.split(\" \"); // List of terms the user inputs\r\n\r\n    // Checks if there's atleast one search term\r\n    if(input[0] != \"\"){\r\n        // Checks if anything precedes this query\r\n        // If something does, add a comma\r\n        if(filter === \"\"){ \r\n            search = '{\"or\":['\r\n        }\r\n        else{\r\n            search = ',{\"or\":['\r\n        }\r\n\r\n        // Loops through each of the attributes\r\n        for(var j = 0; j < keys.length; j++){\r\n            // Loops through each term the user inputs\r\n            for(var i = 0; i < input.length; i++){\r\n                currAttribute = keys[j]\r\n                // Special case, adds comma if this is the first entry in the \r\n                // search query \r\n                if(currAttribute === \"name\" && i == 0)\r\n                    search += '{\"name\":\"' + currAttribute \r\n                        + '\",\"op\":\"like\",\"val\":\"\\%'+ input[i] +'\\%\"}'\r\n                else\r\n                    search += ',{\"name\":\"' + currAttribute \r\n                        + '\",\"op\":\"like\",\"val\":\"\\%'+ input[i] +'\\%\"}'\r\n            }\r\n        }\r\n\r\n        search += \"]}\";\r\n        filter += search;\r\n    }\r\n\r\n    return filter;\r\n}\r\n\r\n/*\r\n * Sets the state input variable to what the user types.\r\n */\r\nhandleTermChange(e) {\r\n    this.setState({ input: e.target.value });\r\n}\r\n\r\n/*\r\n * Calls componentDidMount so the data that is displayed is updated.\r\n */\r\nhandleSearch() {\r\n    this.componentDidMount();\r\n}\r\n\r\n/*\r\n * If the user presses 'Enter', calls the handleSearch() method so that the \r\n * search is made.\r\n */\r\nhandleEnter(e) {\r\n    if (e.key === 13) {\r\n        this.handleSearch();\r\n    }\r\n}\r\n\r\n/*\r\n * If the user clicks on the 'Submit' buttion, calls the handleSearch() \r\n * method so that the search is made.\r\n */\r\nhandleSubmit(e) {\r\n    e.preventDefault();\r\n    this.handleSearch();\r\n}\r\n\r\n/*\r\n * Sets the state sort variable to what the user chooses. Either 'asc' \r\n * or 'desc.' Then calls componentDidMount() so that the new data is loaded. \r\n */\r\nhandleSorting(sort){\r\n    this.setState({sortBy: sort}, () => {\r\n    this.componentDidMount();\r\n    });\r\n}\r\n\r\n/*\r\n * Updates the state attributes variable to what the user chooses for the \r\n * specified filter. Then calls componentDidMount() so that the new data \r\n * is loaded. \r\n */\r\nhandleFilter(attribute, filter){\r\n    var newAttributes = this.state.attributes;\r\n    newAttributes[attribute] = filter;\r\n\r\n    this.setState({attributes: newAttributes, page: 1, \r\n                   nextpage: 2, lastpage: 1}, () =>{\r\n    this.componentDidMount();\r\n    });\r\n}\r\n\r\n/*\r\n* Updates page variables that are used in pagination when the user clicks \r\n* on a new page number to go to. Then calls componentDidMount() so that the \r\n* new data is loaded. \r\n*/\r\nhandlePageClick(newPage){\r\n    if(newPage === 1){\r\n        this.setState({lastpage: newPage, page: newPage, nextpage: 2}, () => {\r\n            this.componentDidMount();\r\n        });\r\n    }\r\n    else if(newPage === this.state.pages){\r\n        this.setState({lastpage: newPage - 1, page: newPage, nextpage: newPage}, () => {\r\n            this.componentDidMount();\r\n        });\r\n    }\r\n    else{\r\n        this.setState({lastpage: newPage - 1, page: newPage, nextpage: newPage + 1}, () => {\r\n            this.componentDidMount();\r\n        });\r\n    }\r\n}\r\n\r\n/*\r\n * Resets all the attributes and variables that are used for filtering, \r\n * searching, and pagination to their default. Then calls componentDidMount() \r\n * so that the new data is loaded. \r\n */\r\nhandleReset(){\r\n    this.setState({\r\n            dropDownSelections: {\r\n                \"party\":\"None\", \r\n                \"population\": \"None\", \r\n                \"median\":\"None\", \r\n                \"resource\":\"None\"}, \r\n            input: \"\", \r\n            attributes: {\r\n                name: \"\", \r\n                dominant_party: \"\", \r\n                population: {\"lower\": \"\", \"upper\": \"\"}, \r\n                median_hh_income: {\"lower\": \"\", \"upper\": \"\"}, \r\n                primary_energy_source_1: \"\"},\r\n            page: 1, \r\n            nextpage: 2, \r\n            lastpage: 1}, () =>{\r\n    this.componentDidMount();\r\n    });\r\n}\r\n\r\n/*\r\n * Toggles the dropdown option for the specified filterable attribute.\r\n */\r\nsetDropdownOpen(attribute){\r\n    var newdropdownOpen = this.state.dropdownOpen;\r\n    newdropdownOpen[attribute] = !newdropdownOpen[attribute];\r\n\r\n    this.setState({dropdownOpen: newdropdownOpen});\r\n}\r\n\r\n/*\r\n * Sets the title variable for the dropdown menu of the correct filter. Then\r\n * checks the attribute that was passed in. Updates variables where needed and \r\n * calls handleFilter() with the attribute name and value.\r\n */\r\nsetDropDownTitle(attribute, selection){\r\n    var newDropDownSelections = this.state.dropDownSelections;\r\n    newDropDownSelections[attribute] = selection;\r\n\r\n    this.setState({dropDownSelections: newDropDownSelections});\r\n\r\n    if(selection === \"None\"){\r\n        selection = \"\";\r\n    }\r\n\r\n    if(attribute === \"party\")\r\n        this.handleFilter(\"dominant_party\", selection)\r\n\r\n    else if(attribute === \"population\"){\r\n        var lowerPop = \"\"\r\n        var upperPop = \"\"\r\n        switch(selection){\r\n            case \"1 - 999,999\":\r\n                selection = {\"lower\": \"1\", \"upper\": \"999999\"}\r\n                break;\r\n            case \"1,000,000 - 9,999,999\":\r\n                selection = {\"lower\": \"1000000\", \"upper\": \"9999999\"}\r\n                break;\r\n            case \"10,000,000 - 19,999,999\":\r\n                selection = {\"lower\": \"10000000\", \"upper\": \"19999999\"}\r\n                break;\r\n            case \"> 20,000,000\":\r\n                selection = {\"lower\": \"20000000\", \"upper\": \"\"}\r\n                break;\r\n            default:\r\n                selection = {\"lower\": \"\", \"upper\": \"\"}\r\n        }\r\n        this.handleFilter(\"population\",selection);\r\n    }\r\n\r\n    else if(attribute === \"median\"){\r\n        switch(selection){\r\n            case \"1 - 49,999\":\r\n                selection = {\"lower\": \"1\", \"upper\": \"49999\"}\r\n                break;\r\n            case \"50,000 - 59,999\":\r\n                selection = {\"lower\": \"50000\", \"upper\": \"59999\"}\r\n                break;\r\n            case \"60,000 - 69,999\":\r\n                selection = {\"lower\": \"60000\", \"upper\": \"69999\"}\r\n                break;\r\n            case \"> 70,000\":\r\n                selection = {\"lower\": \"70000\", \"upper\": \"\"}\r\n                break;\r\n            default:\r\n                selection = {\"lower\": \"\", \"upper\": \"\"}\r\n        }\r\n        this.handleFilter(\"median_hh_income\",selection);\r\n    }\r\n\r\n    else if(attribute === \"resource\")\r\n        this.handleFilter(\"primary_energy_source_1\",selection);\r\n}\r\n\r\n/* \r\n * Renders the button group for filters.\r\n */\r\nrenderFilterButtonGroup(attribute, filterOptions, filterTitles){ \r\n    return (\r\n    <Dropdown isOpen={this.state.dropdownOpen[attribute]} toggle={() => this.setDropdownOpen(attribute)}>\r\n        <DropdownToggle caret>\r\n            Filter by {filterTitles[attribute]}: {this.state.dropDownSelections[attribute]}\r\n        </DropdownToggle>\r\n        <DropdownMenu>{\r\n                filterOptions[attribute].map((selection) =>\r\n                    <DropdownItem onClick={() => this.setDropDownTitle(attribute, selection)}>{selection}</DropdownItem>\r\n                )\r\n            }\r\n        </DropdownMenu>{' '}\r\n    </Dropdown>\r\n    )\r\n}\r\n\r\n/*\r\n * Renders the buttons for filters and sorting.\r\n */\r\nrenderTop(){\r\n    // Lists of all of the options for filtering for each attribute\r\n    var filterOptions = {\r\n        party: [\r\n            \"None\", \"Democratic\", \"Republican\"],\r\n        population: [\r\n            \"None\", \"1 - 999,999\", \"1,000,000 - 9,999,999\", \r\n            \"10,000,000 - 19,999,999\", \"> 20,000,000\"],\r\n        median: [\r\n            \"None\", \"1 - 49,999\", \"50,000 - 59,999\", \r\n            \"60,000 - 69,999\", \"> 70,000\"],\r\n        resource:  [\r\n            \"None\", \"Nuclear Power\", \"Natural Gas\", \"Coal\", \"Petroleum\", \r\n            \"Hydroelectricity\"]\r\n    }\r\n\r\n    // Titles for the filter buttons, \"Filter by: _____\"\r\n    var filterTitles = {\r\n        party: \"Party\",\r\n        population: \"Population\",\r\n        median: \"Income\",\r\n        resource: \"Energy\"\r\n    }\r\n\r\n    // Grabs list of filterable attributes\r\n    var attributesList = Object.keys(filterOptions);\r\n\r\n    return(\r\n        <container>\r\n            <Row>\r\n                <Col className=\"text-left\">\r\n                    <ButtonGroup>{\r\n                            // Renders all the filter buttons\r\n                            attributesList.map((attribute) => \r\n                                this.renderFilterButtonGroup(attribute, filterOptions, filterTitles))         \r\n                        }\r\n                        <Button onClick={() => this.handleReset()}>Reset</Button>{' '}\r\n                    </ButtonGroup>\r\n                </Col>\r\n                <Col className=\"text-right\">\r\n                    <Button color=\"primary\" onClick={() => this.handleSorting(\"asc\")}>Ascending</Button>{' '}\r\n                    <Button color=\"secondary\"onClick={() => this.handleSorting(\"desc\")}>Descending</Button>{' '}\r\n                </Col>\r\n            </Row>\r\n            <Form className=\"searchbox\" onSubmit={this.handleSubmit}>\r\n                <FormGroup row style={{paddingTop: \"25px\"}}>\r\n                    <Col sm={{ size: 'auto', offset: 5 }}>\r\n                        <Input\r\n                            type=\"text\"\r\n                            placeholder=\"Search\"\r\n                            onChange={this.handleTermChange}\r\n                            onKeyDown={this.handleEnter}\r\n                        />\r\n                    </Col>\r\n                </FormGroup>\r\n            </Form>\r\n\r\n        </container>\r\n    );\r\n}\r\n\r\n/*\r\n * Renders the body of a card item.\r\n */\r\n renderAttribute(item, attribute){\r\n    // Titles for the attributes in the card body\r\n    var attributeTitles = {\r\n        name: \"\",\r\n        dominant_party: \"Dominate Party: \",\r\n        population: \"Population: \",\r\n        median_hh_income: \"Median Income: \",\r\n        primary_energy_source_1: \"Primary Energy Source: \"\r\n    }\r\n\r\n    // Special case, if the attribute is the name, renders the attribute with\r\n    // a CardTitle\r\n    if(attribute === \"name\"){\r\n       return(\r\n        <CardTitle>{attributeTitles[attribute]}<Highlighter\r\n            highlightClassName=\"HighlightClass\"\r\n            searchWords={this.state.input.split(\" \")}\r\n            autoEscape={true}\r\n            textToHighlight={\"\" + item[attribute]}/>\r\n        </CardTitle>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <CardSubtitle>{attributeTitles[attribute]}<Highlighter\r\n            highlightClassName=\"HighlightClass\"\r\n            searchWords={this.state.input.split(\" \")}\r\n            autoEscape={true}\r\n            textToHighlight={\"\" + item[attribute]}/>\r\n        </CardSubtitle>\r\n    )\r\n    \r\n\r\n }\r\n\r\n/*\r\n * Renders a card item.\r\n */\r\nrenderCard(item){\r\n    var attributeList = Object.keys(this.state.attributes); // Makes list of attributes\r\n\r\n    return(\r\n        <Card>\r\n            <img \r\n                top width=\"80%\" \r\n                style={{width: '300px', height: '375px'}}  \r\n                src={\"https://www.state-maps.org/\" \r\n                    + item.congress_members[0][\"state_abr\"].toLowerCase() \r\n                    + \".gif\" } alt={\"No image\"} />\r\n            <CardBody>{\r\n                attributeList.map((attribute) => this.renderAttribute(item, attribute))\r\n            }\r\n            <Button href= {\"/state/\" + item.name} class=\"nav-link\"  to={\"/state/\" + item.name}> See More</Button>\r\n            </CardBody>\r\n        </Card>\r\n    )\r\n}\r\n\r\n/*\r\n * Creates the cards for the states. Loops 3 times to create 3 card decks itmems\r\n * with 3 card items. Returns all 3 card deck items at the end. \r\n */\r\nrenderCards(){\r\n    const items = this.state.items;\r\n    var cardDecks = []; // Will hold the card deck items\r\n    var cards = []; // Will hold the card \r\n   \r\n    // Need 3 card deck items so loop 3 times\r\n    for(var i = 0; i < 3; i++){\r\n        cards = []; // Clears out the old card items to make a new one\r\n        // Grabs 3 pieces of data at a time, creates card items for each of them\r\n        // and adds each one to the cards list\r\n        items.slice(i * 3,(i + 1) * 3).map(item => cards.push(this.renderCard(item))\r\n        )\r\n        // Adds the 3 newly created cards to the cardDecks list\r\n        cardDecks.push(<CardDeck>{cards}</CardDeck>);\r\n    }\r\n    return cardDecks;\r\n}\r\n\r\n/*\r\n * Renders the entire page.\r\n */\r\nrender() {\r\n    return (\r\n        <div>\r\n            <div>\r\n                {this.renderTop()}\r\n            </div>\r\n            <div className=\"States\" style={{\r\n                    paddingTop: \"100px\",\r\n                    width:\"100%\", \r\n                    height:\"60%\"}}>\r\n                <div>\r\n                    <Col sm={{ size: 'auto'}}>\r\n                        {this.renderCards()}\r\n                    </Col>\r\n                </div>\r\n                <div>\r\n                    <MyPagination \r\n                        pages = {this.state.pages} \r\n                        handlePageClick = {this.handlePageClick}\r\n                        nextpage = {this.state.nextpage} \r\n                        lastpage = {this.state.lastpage}\r\n                        page = {this.state.page}/> \r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n}\r\n\r\nexport default States;"]},"metadata":{},"sourceType":"module"}