{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Edwin\\\\Documents\\\\College\\\\CS_373\\\\cs373-web\\\\frontend\\\\empoweringknowledge\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Col,Card,CardImg,CardBody,CardTitle,CardSubtitle,CardDeck,Button,Pagination,PaginationItem,PaginationLink}from'reactstrap';import{BrowserRouter}from'react-router-dom';import'./Navbar.css';import'bootstrap/dist/css/bootstrap.min.css';import{RepresentativeInstance}from'./RepresentativeInstance.js';import person from'./emptyperson.png';export var Representatives=/*#__PURE__*/function(_Component){_inherits(Representatives,_Component);function Representatives(props){var _this;_classCallCheck(this,Representatives);_this=_possibleConstructorReturn(this,_getPrototypeOf(Representatives).call(this,props));_this.state={items:[],page:1,pages:0,nextpage:2,lastpage:1,sortBy:\"asc\",filter:\"\",title:\"\",party:\"\",state:\"\",active:\"\",isLoading:false};return _this;}_createClass(Representatives,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.state.page);this.setState({isLoading:true});var filter=this.state.filter;// var population = this.state.population;\n// var median = this.state.median;\n// if(population !== \"\"){\n//     if(filter === \"\"){\n//         filter += '{\"name\":\"population\",\"op\":\"gt\",\"val\":\"'+ population +'\"}'\n//     }\n//     else{\n//         filter += ',{\"name\":\"population\",\"op\":\"gt\",\"val\":\"'+ population +'\"}'\n//     }\n// }\n// if(median !== \"\"){\n//     if(filter === \"\"){\n//         filter += '{\"name\":\"median_hh_income\",\"op\":\"gt\",\"val\":\"'+ median +'\"}'\n//     }\n//     else{\n//         filter += ',{\"name\":\"median_hh_income\",\"op\":\"gt\",\"val\":\"'+ median +'\"}'\n//     }\n//}\nif(filter===\"\"){fetch('https://api.empoweringknowledge.me/api/congressmembers?q={\"order_by\":[{\"field\":\"first_name\",\"direction\":\"'+this.state.sortBy+'\"}]}&page='+this.state.page).then(function(res){return res.json();}).then(function(data){_this2.setState({items:data.objects,pages:data.total_pages,isLoading:false});}).catch(console.log);}else{fetch('https://api.empoweringknowledge.me/api/congressmembers?q={\"filters\":['+filter+'],\"order_by\":[{\"field\":\"name\",\"direction\":\"'+this.state.sortBy+'\"}]}&page='+this.state.page).then(function(res){return res.json();}).then(function(data){_this2.setState({items:data.objects,pages:data.total_pages,isLoading:false});}).catch(console.log);}}// refetch(){\n//     console.log(this.state.page)\n//     this.setState({isLoading: true});\n//     fetch('https://dm5v6ty0dwipl.cloudfront.net/api/congressmembers'+ \"?page=\" + this.state.page)\n//     .then(res => res.json())\n//     .then((data) => {\n//         this.setState({ items: data.objects,isLoading: false,pages:data.total_pages});      \n//     })\n//     .catch(console.log)\n// }\n},{key:\"handlePageClick\",value:function handlePageClick(newPage){var _this3=this;if(newPage===1){this.setState({lastpage:newPage,page:newPage,nextpage:2},function(){_this3.componentDidMount();});}else if(newPage===this.state.pages){this.setState({lastpage:newPage-1,page:newPage,nextpage:newPage},function(){_this3.componentDidMount();});}else{this.setState({lastpage:newPage-1,page:newPage,nextpage:newPage+1},function(){_this3.componentDidMount();});}}},{key:\"handleSorting\",value:function handleSorting(sort){var _this4=this;this.setState({sortBy:sort},function(){_this4.componentDidMount();});}// handleFilterPopulation(populationFilter){\n//     this.setState({population: populationFilter}, () =>{\n//     this.componentDidMount();\n//     });\n// }\n// handleFilterMedian(medianFilter){\n//     this.setState({median: medianFilter}, () =>{\n//     this.componentDidMount();\n//     });\n// }\n// handleReset(){\n//     this.setState({filter: \"\", population: \"\", median: \"\"}, () =>{\n//     this.componentDidMount();\n//     });\n// }\n},{key:\"renderSortAndFilter\",value:function renderSortAndFilter(){var _this5=this;return React.createElement(\"div\",{className:\"text-right\"},React.createElement(Button,{color:\"primary\",onClick:function onClick(){return _this5.handleSorting(\"asc\");}},\"Ascending\"),' ',React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return _this5.handleSorting(\"desc\");}},\"Descending\"),' ');}},{key:\"render\",value:function render(){var _this6=this;var titleMap={\"D\":\"Democratic\",\"R\":\"Republican\"};var _this$state=this.state,items=_this$state.items,isLoading=_this$state.isLoading;console.log(isLoading);if(isLoading){console.log(isLoading);return false;}console.log(items);return React.createElement(\"div\",null,React.createElement(\"div\",null,this.renderSortAndFilter()),React.createElement(BrowserRouter,null,React.createElement(\"div\",{className:\"Representatives\",style:{width:\"100%\",height:\"60%\"}},React.createElement(\"div\",null,React.createElement(Col,{sm:{size:'auto'}},React.createElement(CardDeck,null,items.slice(0,3).map(function(item){return React.createElement(Card,null,React.createElement(CardImg,{top:true,width:\"80%\",src:item.image_url,alt:\"No image\"}),React.createElement(CardBody,null,React.createElement(CardTitle,null,item.first_name+\" \"+item.last_name),React.createElement(CardSubtitle,null,\"Title:  \",item.title),React.createElement(CardSubtitle,null,\"Party: \",titleMap[item.party]),React.createElement(CardSubtitle,null,\"State: \",item.state),React.createElement(CardSubtitle,null,\"Active from: Congress \",item.congresses[0][\"con_num\"],\" - Congress \",item.congresses[item.congresses.length-1][\"con_num\"]),React.createElement(Button,{href:\"/politician/\"+item.member_id,class:\"nav-link\",to:\"/politician/\"+item.member_id,render:function render(props){return React.createElement(RepresentativeInstance,Object.assign({},props,{name:item.member_id}));}},\" See More\")));})),React.createElement(CardDeck,null,items.slice(3,6).map(function(item){return React.createElement(Card,null,React.createElement(CardImg,{top:true,width:\"80%\",src:item.image_url,alt:\"No image\"}),React.createElement(CardBody,null,React.createElement(CardTitle,null,item.first_name+\" \"+item.last_name),React.createElement(CardSubtitle,null,\"Title:  \",item.title),React.createElement(CardSubtitle,null,\"Party: \",titleMap[item.party]),React.createElement(CardSubtitle,null,\"State: \",item.state),React.createElement(CardSubtitle,null,\"Active from: Congress \",item.congresses[0][\"con_num\"],\" - Congress \",item.congresses[item.congresses.length-1][\"con_num\"],\" \"),React.createElement(Button,{href:\"/politician/\"+item.member_id,class:\"nav-link\",to:\"/politician/\"+item.member_id,render:function render(props){return React.createElement(RepresentativeInstance,Object.assign({},props,{name:item.member_id}));}},\" See More\")));})),React.createElement(CardDeck,null,items.slice(6,10).map(function(item){return React.createElement(Card,null,React.createElement(CardImg,{top:true,width:\"80%\",src:item.image_url/*onError={(e)=>{e.target.onerror = null; e.target.src={person}}}*/,alt:\"No image\"}),React.createElement(CardBody,null,React.createElement(CardTitle,null,item.first_name+\" \"+item.last_name),React.createElement(CardSubtitle,null,\"Title:  \",item.title),React.createElement(CardSubtitle,null,\"Party: \",titleMap[item.party]),React.createElement(CardSubtitle,null,\"State: \",item.state),React.createElement(CardSubtitle,null,\"Active from: Congress \",item.congresses[0][\"con_num\"],\" - Congress \",item.congresses[item.congresses.length-1][\"con_num\"],\" \"),React.createElement(Button,{href:\"/politician/\"+item.member_id,class:\"nav-link\",to:\"/politician/\"+item.member_id,render:function render(props){return React.createElement(RepresentativeInstance,Object.assign({},props,{name:item.member_id}));}},\" See More\")));})))),React.createElement(\"div\",null,React.createElement(Pagination,{size:\"lg\",style:{justifyContent:'center',paddingTop:'3%'},\"aria-label\":\"Page navigation example\"},React.createElement(PaginationItem,null,React.createElement(PaginationLink,{first:true,onClick:function onClick(){return _this6.handlePageClick(1);},href:\"#\"})),React.createElement(PaginationItem,null,React.createElement(PaginationLink,{previous:true,onClick:function onClick(){return _this6.handlePageClick(_this6.state.lastpage);},href:\"#\"})),React.createElement(PaginationItem,null,React.createElement(PaginationLink,{onClick:function onClick(){return _this6.handlePageClick(_this6.state.page);},href:\"#\"},this.state.page)),React.createElement(PaginationItem,null,React.createElement(PaginationLink,{onClick:function onClick(){return _this6.handlePageClick(_this6.state.nextpage);},href:\"#\"},this.state.nextpage)),React.createElement(PaginationItem,null,React.createElement(PaginationLink,{next:true,onClick:function onClick(){return _this6.handlePageClick(_this6.state.nextpage);},href:\"#\"})),React.createElement(PaginationItem,null,React.createElement(PaginationLink,{last:true,onClick:function onClick(){return _this6.handlePageClick(_this6.state.pages);},href:\"#\"})))))));}}]);return Representatives;}(Component);export default Representatives;","map":{"version":3,"sources":["C:\\Users\\Edwin\\Documents\\College\\CS_373\\cs373-web\\frontend\\empoweringknowledge\\src\\Representatives.js"],"names":["React","Component","Col","Card","CardImg","CardBody","CardTitle","CardSubtitle","CardDeck","Button","Pagination","PaginationItem","PaginationLink","BrowserRouter","RepresentativeInstance","person","Representatives","props","state","items","page","pages","nextpage","lastpage","sortBy","filter","title","party","active","isLoading","console","log","setState","fetch","then","res","json","data","objects","total_pages","catch","newPage","componentDidMount","sort","handleSorting","titleMap","renderSortAndFilter","width","height","size","slice","map","item","image_url","first_name","last_name","congresses","length","member_id","justifyContent","paddingTop","handlePageClick"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {\r\n    Col,\r\n    Card, CardImg, CardBody, CardTitle, CardSubtitle, CardDeck, \r\n    Button, \r\n    Pagination, PaginationItem, PaginationLink\r\n     } from 'reactstrap';\r\nimport { BrowserRouter} from 'react-router-dom';\r\n\r\nimport './Navbar.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {RepresentativeInstance} from './RepresentativeInstance.js';\r\nimport person from './emptyperson.png';\r\n\r\nexport class Representatives extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            items: [],\r\n            page: 1,\r\n            pages: 0,\r\n            nextpage: 2,\r\n            lastpage: 1,\r\n            sortBy: \"asc\",\r\n            filter: \"\",\r\n            title: \"\",\r\n            party: \"\",\r\n            state: \"\", \r\n            active: \"\", \r\n            isLoading: false,\r\n        }\r\n        \r\n        \r\n    }\r\n    componentDidMount() {\r\n        console.log(this.state.page)\r\n        this.setState({isLoading: true});\r\n        var filter = this.state.filter;\r\n        // var population = this.state.population;\r\n        // var median = this.state.median;\r\n\r\n        // if(population !== \"\"){\r\n        //     if(filter === \"\"){\r\n        //         filter += '{\"name\":\"population\",\"op\":\"gt\",\"val\":\"'+ population +'\"}'\r\n        //     }\r\n        //     else{\r\n        //         filter += ',{\"name\":\"population\",\"op\":\"gt\",\"val\":\"'+ population +'\"}'\r\n        //     }\r\n        // }\r\n        // if(median !== \"\"){\r\n        //     if(filter === \"\"){\r\n        //         filter += '{\"name\":\"median_hh_income\",\"op\":\"gt\",\"val\":\"'+ median +'\"}'\r\n        //     }\r\n        //     else{\r\n        //         filter += ',{\"name\":\"median_hh_income\",\"op\":\"gt\",\"val\":\"'+ median +'\"}'\r\n        //     }\r\n\r\n        //}\r\n        if(filter === \"\"){\r\n            fetch('https://api.empoweringknowledge.me/api/congressmembers?q={\"order_by\":[{\"field\":\"first_name\",\"direction\":\"'\r\n                + this.state.sortBy \r\n                + '\"}]}&page='\r\n                + this.state.page)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                this.setState({ items: data.objects, pages:data.total_pages,isLoading: false});      \r\n            })\r\n            .catch(console.log)\r\n        }\r\n        else{\r\n            fetch('https://api.empoweringknowledge.me/api/congressmembers?q={\"filters\":[' + filter + '],\"order_by\":[{\"field\":\"name\",\"direction\":\"'\r\n                + this.state.sortBy \r\n                + '\"}]}&page='\r\n                + this.state.page)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                this.setState({ items: data.objects, pages:data.total_pages,isLoading: false});      \r\n            })\r\n            .catch(console.log)\r\n        }\r\n    }\r\n\r\n    // refetch(){\r\n    //     console.log(this.state.page)\r\n    //     this.setState({isLoading: true});\r\n    //     fetch('https://dm5v6ty0dwipl.cloudfront.net/api/congressmembers'+ \"?page=\" + this.state.page)\r\n    //     .then(res => res.json())\r\n    //     .then((data) => {\r\n    //         this.setState({ items: data.objects,isLoading: false,pages:data.total_pages});      \r\n    //     })\r\n    //     .catch(console.log)\r\n    // }\r\n\r\n    handlePageClick(newPage){\r\n        if(newPage === 1){\r\n            this.setState({lastpage: newPage, page: newPage, nextpage: 2}, () => {\r\n            this.componentDidMount();\r\n            });\r\n        }\r\n        else if(newPage === this.state.pages){\r\n            this.setState({lastpage: newPage - 1, page: newPage, nextpage: newPage}, () => {\r\n                this.componentDidMount();\r\n                });\r\n        }\r\n        else{\r\n            this.setState({lastpage: newPage - 1, page: newPage, nextpage: newPage + 1}, () => {\r\n                this.componentDidMount();\r\n                });\r\n        }\r\n    }\r\n\r\n    handleSorting(sort){\r\n        this.setState({sortBy: sort}, () => {\r\n        this.componentDidMount();\r\n        });\r\n\r\n    }\r\n\r\n    // handleFilterPopulation(populationFilter){\r\n    //     this.setState({population: populationFilter}, () =>{\r\n    //     this.componentDidMount();\r\n    //     });\r\n    // }\r\n\r\n    // handleFilterMedian(medianFilter){\r\n    //     this.setState({median: medianFilter}, () =>{\r\n    //     this.componentDidMount();\r\n    //     });\r\n    // }\r\n\r\n    // handleReset(){\r\n    //     this.setState({filter: \"\", population: \"\", median: \"\"}, () =>{\r\n    //     this.componentDidMount();\r\n    //     });\r\n    // }\r\n\r\n    renderSortAndFilter(){\r\n        return(\r\n            <div className=\"text-right\">\r\n                <Button color=\"primary\" onClick={() => this.handleSorting(\"asc\")}>Ascending</Button>{' '}\r\n                <Button color=\"secondary\"onClick={() => this.handleSorting(\"desc\")}>Descending</Button>{' '}\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    render() {\r\n        var titleMap ={\r\n            \"D\": \"Democratic\",\r\n            \"R\": \"Republican\",\r\n        };\r\n\r\n        const {items, isLoading} = this.state;\r\n        console.log(isLoading)\r\n        if (isLoading){\r\n            console.log(isLoading)\r\n            return false;\r\n        }\r\n        \r\n        console.log(items)        \r\n        \r\n      return (\r\n        <div>\r\n            <div>\r\n                {this.renderSortAndFilter()}\r\n            </div>\r\n            <BrowserRouter>\r\n            <div className=\"Representatives\" style={{width:\"100%\", height:\"60%\"}}>\r\n            \r\n               <div>\r\n\r\n                <Col sm={{ size: 'auto'}}>\r\n                    <CardDeck>\r\n                        {items.slice(0, 3).map(item =>\r\n                            <Card>\r\n                                <CardImg top width=\"80%\" src={item.image_url}  alt={\"No image\"} />\r\n                                <CardBody>\r\n                                <CardTitle>{item.first_name + \" \" + item.last_name}</CardTitle>\r\n                                <CardSubtitle>Title:  {item.title}</CardSubtitle>\r\n                                <CardSubtitle>Party: {titleMap[item.party]}</CardSubtitle>\r\n                                <CardSubtitle>State: {item.state}</CardSubtitle>\r\n                                <CardSubtitle>Active from: Congress {item.congresses[0][\"con_num\"]} - Congress {item.congresses[item.congresses.length - 1][\"con_num\"]}</CardSubtitle>\r\n                                <Button href= {\"/politician/\" + item.member_id} class=\"nav-link\"  to={\"/politician/\" + item.member_id} render={(props) => <RepresentativeInstance {...props} name={item.member_id} />}> See More</Button>\r\n                                </CardBody>\r\n                                \r\n                            </Card>\r\n                        )}\r\n                    </CardDeck>\r\n                    <CardDeck>\r\n                        {items.slice(3, 6).map(item =>\r\n                            <Card>\r\n                                <CardImg top width=\"80%\" src={item.image_url} alt={\"No image\"} />\r\n                                <CardBody>\r\n                                <CardTitle>{item.first_name + \" \" + item.last_name}</CardTitle>\r\n                                <CardSubtitle>Title:  {item.title}</CardSubtitle>\r\n                                <CardSubtitle>Party: {titleMap[item.party]}</CardSubtitle>\r\n                                <CardSubtitle>State: {item.state}</CardSubtitle>\r\n                                <CardSubtitle>Active from: Congress {item.congresses[0][\"con_num\"]} - Congress {item.congresses[item.congresses.length - 1][\"con_num\"]} </CardSubtitle>\r\n                                    <Button href= {\"/politician/\" + item.member_id} class=\"nav-link\"  to={\"/politician/\" + item.member_id} render={(props) => <RepresentativeInstance {...props} name={item.member_id} />}> See More</Button>\r\n                                </CardBody>\r\n                                \r\n                            </Card>\r\n                        )}\r\n                    </CardDeck>\r\n                    <CardDeck>\r\n                        {items.slice(6, 10).map(item =>\r\n                            <Card>\r\n                                <CardImg top width=\"80%\" src={item.image_url} /*onError={(e)=>{e.target.onerror = null; e.target.src={person}}}*/ alt={\"No image\"} />\r\n                                <CardBody>\r\n                                <CardTitle>{item.first_name + \" \" + item.last_name}</CardTitle>\r\n                                <CardSubtitle>Title:  {item.title}</CardSubtitle>\r\n                                <CardSubtitle>Party: {titleMap[item.party]}</CardSubtitle>\r\n                                <CardSubtitle>State: {item.state}</CardSubtitle>\r\n                                <CardSubtitle>Active from: Congress {item.congresses[0][\"con_num\"]} - Congress {item.congresses[item.congresses.length - 1][\"con_num\"]} </CardSubtitle>\r\n                                <Button href= {\"/politician/\" + item.member_id} class=\"nav-link\"  to={\"/politician/\" + item.member_id} render={(props) => <RepresentativeInstance {...props} name={item.member_id} />}> See More</Button>\r\n                                </CardBody>\r\n                                \r\n                            </Card>\r\n                        )}\r\n                    </CardDeck>\r\n\r\n                </Col>\r\n\r\n                </div>\r\n                <div>\r\n            <Pagination size=\"lg\" style={{justifyContent: 'center', paddingTop:'3%'}} aria-label=\"Page navigation example\">\r\n            <PaginationItem>\r\n              <PaginationLink first onClick={() => this.handlePageClick(1)} href={\"#\"} />\r\n            </PaginationItem>\r\n            <PaginationItem>\r\n              <PaginationLink previous onClick={() => this.handlePageClick(this.state.lastpage)} href={\"#\"} />\r\n            </PaginationItem>\r\n            {/* <PaginationItem>\r\n              <PaginationLink onClick={() => this.handlePageClick(this.state.lastpage)} href={\"#\"}>\r\n                {this.state.lastpage}\r\n              </PaginationLink>\r\n            </PaginationItem> */}\r\n            <PaginationItem>\r\n              <PaginationLink onClick={() => this.handlePageClick(this.state.page)} href={\"#\"}>\r\n                {this.state.page}\r\n              </PaginationLink>\r\n            </PaginationItem>\r\n            <PaginationItem>\r\n              <PaginationLink onClick={() => this.handlePageClick(this.state.nextpage)} href={\"#\"}>\r\n                {this.state.nextpage}\r\n              </PaginationLink>\r\n            </PaginationItem>\r\n            <PaginationItem>\r\n              <PaginationLink next onClick={() => this.handlePageClick(this.state.nextpage)} href={\"#\"} />\r\n            </PaginationItem>\r\n            <PaginationItem>\r\n              <PaginationLink last onClick={() => this.handlePageClick(this.state.pages)} href=\"#\" />\r\n            </PaginationItem>\r\n          </Pagination>\r\n          </div>\r\n            </div>\r\n            </BrowserRouter>\r\n        </div>\r\n\r\n      );\r\n    }\r\n}\r\n\r\nexport default Representatives;"]},"metadata":{},"sourceType":"module"}